#!/usr/bin/env node
var _ = require('lodash');
var prog = require('commander');
var path = require('path');

var pkg = require('../package.json');
var include = require('../index');

var arg = process.argv;

// General options
prog
	.version(pkg.version)
	.usage('[options] <source to your html, default ./index.html>')
	.option('-o, --output <directory>', 'Path to output directory, defaults to current directory')
	.option('-p, --port <port number>', 'Port which your local server start.')
	.parse(arg)

// if empty
if(_.isEmpty(prog.args) && arg.length === 2)
   return prog.help();

var html = prog.args[0] ? prog.args[0] : './index.html'
if(prog.output)
	include(path.resolve(process.cwd(), html), prog.output, prog.port);
else
	return console.error("You have to add an option \"-o\" for a output folder.")

